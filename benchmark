#!/usr/bin/env ruby
# This executable removes all the information stored in your database

require 'benchmark'
require_relative 'mytv'

cli = MyTV::Cli.new

MyTV::Database.clear(cli.myShows, cli.episodes)

#Change to bmbm?
Benchmark.bm do |bm|

	# Tries to add a list of 104 shows
	bm.report("import:") do
		cli.DB.transaction do
			MyTV::Import.import(cli.myShows, cli.episodes, "testshows.txt", false)
		end
	end

	# Iterates over those 104 shows looking for updates
	bm.report("update:") do
		MyTV::Database.update(cli.myShows, cli.episodes)
	end

	# Deletes all those shows
	bm.report("clear:") do
		MyTV::Database.clear(cli.myShows, cli.episodes)
	end

end

# rehearsal = 499 + 28 + 0.2
# second try = 545 + 31 + 0.2
# total: 18:26